
2. 教会程序“判断是非” (关系与逻辑运算)
在做决定之前，程序首先要学会比较。

---
2.1 关系运算：比大小
就像数学里的大小比较，用来告诉程序两个东西的关系。
- 符号：
  - >  (大于)
  - <  (小于)
  - == (等于)
  - != (不等于)
- 结果：
 不管你比较什么，结果只有两种：
  - 真：true（在 C/C++ 中通常可以当作 1）
  - 假：false（通常当作 0）
- ⚠️ 致命陷阱：
 在 C++ 中：
  - = 是赋值：给变量一个新的值
  - == 才是判断相等
 写错一个符号，程序逻辑就会完全跑偏。
2.1.1 关系运算例子 1：成绩比较
int score = 85;

bool isPass = score >= 60;   // 大于等于 60 算及格
bool isFull = score == 100;  // 是否满分
bool isOut  = score > 150;   // 成绩是否非法（>150）

// isPass = true
// isFull = false
// isOut  = false
- score >= 60 结果是 true
- score == 100 结果是 false
- score > 150 结果是 false
【小练习 2.1-1】
下面的代码，每个表达式的结果是 true 还是 false？
int a = 10;
int b = 20;

bool r1 = a > b;
bool r2 = a * 2 == b;
bool r3 = b - a != 10;
bool r4 = a + b >= 30;
【答案解析 2.1-1】
- r1 = (10 > 20) → false
- r2 = (10 * 2 == 20) → 20 == 20 → true
- r3 = (20 - 10 != 10) → 10 != 10 → false
- r4 = (10 + 20 >= 30) → 30 >= 30 → true

---
2.1.2 关系运算例子 2：年龄判断
int age = 17;

bool isAdult   = age >= 18;              // 是否成年
bool isTeenage = age >= 13 && age <= 19; // 是否青少年
bool isBaby    = age < 3;                // 是否婴儿
- age >= 18 → 17 >= 18 为假：false
- age < 3   → 17 < 3 为假：false
【小练习 2.1-2】
把下面的自然语言条件，写成关系表达式（先只用 > < == != >= <=，可以不用 && / ||）：
1. “分数不低于 90 分算优等生”，变量名 score。
2. “温度小于 0 是结冰状态”，变量名 temperature。
3. “如果年份不是 2024，就不是目标年份”，变量名 year。
【参考答案 2.1-2】
1. bool isExcellent = score >= 90;
2. bool isFrozen = temperature < 0;
3. bool isNotTarget = year != 2024;

---
2.1.3 关系运算例子 3：= 和 == 搞混的危险
int x = 5;

// 错误写法：
if (x = 0) {
    // ...
}
- x = 0 是赋值：把 x 改成 0
- if (x = 0) 实际在判断 0，而 0 在 C++ 里是 false
- 结果：if 里的代码永远不会执行，而且你还顺便把 x 改成了 0
正确写法应该是：
if (x == 0) {
    // 判断 x 是否等于 0
}
【小练习 2.1-3】
下面两段代码，哪一段是“永远不会进 if”？它们有什么区别？
// 代码 A
int n = 1;
if (n == 0) {
    // ...
}

// 代码 B
int n = 1;
if (n = 0) {
    // ...
}
【答案解析 2.1-3】
- 代码 A：n == 0 结果是 false，if 不执行，n 还是 1。
- 代码 B：n = 0 把 n 改成 0，整个表达式的值是 0，相当于 if (0)，也不执行，但 n 已经变成 0。
 两段都不会进 if，但 B 更危险，因为悄悄改了变量的值。

---
2.2 逻辑运算：组合拳
有时候判断条件不止一个。比如：
 “只要你是男生 或者 你的分数大于 90 分”。
- && (逻辑与 / AND)：必须全对才是对
- || (逻辑或 / OR)：只要有一个对就是对
- !  (逻辑非 / NOT)：唱反调，真变假，假变真

---
2.2.1 逻辑与 &&：必须都满足
只有“有电” 并且 “开关打开”，灯才会亮。
代码示例：
bool hasPower = true;   // 有电
bool isOn     = false;  // 开关没打开

bool lightOn = hasPower && isOn; // 有电 并且 开关打开 才亮灯
// lightOn = false
再看一个生活例子：
 “只有作业写完 并且 房间打扫干净，才能玩游戏。”
bool homeworkDone = true;   // 作业写完了
bool roomClean    = false;  // 房间没打扫

bool canPlay = homeworkDone && roomClean;
// canPlay = false
- 只要有一个是 false，&& 的结果就是 false。
【小练习 2.2-1】
判断下面每行代码中变量的值是 true 还是 false：
bool a = true;
bool b = false;

bool r1 = a && b;
bool r2 = (5 > 3) && (2 > 1);
bool r3 = (5 > 3) && (2 > 10);
【答案解析 2.2-1】
- r1 = true && false → false
- r2 = (5 > 3) && (2 > 1) → true && true → true
- r3 = (5 > 3) && (2 > 10) → true && false → false

---
2.2.2 逻辑或 ||：满足一个就行
只要“带了钥匙” 或者 “家里有人”，都能进家门。
代码示例：
bool hasKey      = false; // 没带钥匙
bool someoneHome = true;  // 家里有人

bool canEnter = hasKey || someoneHome;
// canEnter = true
再看一个决策例子：
 “只要你是 VIP 或者 金额超过 100 元，就打九折。”
bool isVIP     = false;
double money   = 120;
bool bigAmount = money > 100;

bool hasDiscount = isVIP || bigAmount;
// hasDiscount = true
【小练习 2.2-2】
判断每个表达式的结果：
bool x = false;
bool y = true;

bool r1 = x || y;
bool r2 = (3 < 1) || (4 == 4);
bool r3 = (10 > 20) || (5 > 9);
【答案解析 2.2-2】
- r1 = false || true → true
- r2 = (3 < 1) || (4 == 4) → false || true → true
- r3 = (10 > 20) || (5 > 9) → false || false → false

---
2.2.3 逻辑非 !：唱反调
! 把结果反过来：
- !true → false
- !false → true
例子：
 “不是周末就要上学。”
bool isWeekend = false;        // 不是周末
bool goToSchool = !isWeekend;  // 不是周末 -> 要上学
// goToSchool = true
再看一个登录状态：
bool isLoggedIn = false;
bool needLoginPage = !isLoggedIn;
// needLoginPage = true
【小练习 2.2-3】
写出下面每行的结果：
bool a = true;
bool b = false;

bool r1 = !a;
bool r2 = !b;
bool r3 = !(3 > 1);
bool r4 = !(5 == 5);
【答案解析 2.2-3】
- r1 = !true → false
- r2 = !false → true
- r3 = !(3 > 1) → !(true) → false
- r4 = !(5 == 5) → !(true) → false

---
2.3 聪明的小技巧：短路运算（Short-circuit）
C++ 很“懒”。
- 对于 A && B： 
  - 如果 A 已经是假 (false)，结果一定是假，它不会再去算 B
- 对于 A || B： 
  - 如果 A 已经是真 (true)，结果一定是真，它不会再去算 B
这叫短路运算。

---
2.3.1 例子 1：(i > 3) && (i++)
int i = 3;
bool res = (i > 3) && (i++);
// i > 3 为 false，所以 (i++) 不会执行
// 执行后： i 还是 3，res 是 false

---
2.3.2 例子 2：安全访问（防止除零）
int x = 0;
if (x != 0 && 10 / x > 1) {
    // 不会崩，因为 x != 0 为 false，
    // 后面的 10/x 不会被计算
}
这里利用 && 的短路特性，让程序先检查 x 是否为 0，如果为 0，后面那句危险的 10 / x 根本不执行，避免除零错误。

---
2.3.3 例子 3：|| 的短路
bool isVIP = true;
int points = 0;

if (isVIP || points > 100) {
    // isVIP 为 true，右边不会计算
    // 即使 points 是个很复杂的表达式，也不再浪费时间
}

---
2.3.4 小练习：观察短路效果
【小练习 2.3-1】
猜一猜，下面三段代码执行后，a、b、c 的值分别是多少？
// 代码一
int a = 0;
bool r1 = (a > 0) && (++a > 0);

// 代码二
int b = 0;
bool r2 = (b >= 0) || (++b > 0);

// 代码三
int c = 0;
bool r3 = (c > 0) || (++c > 0);
【答案解析 2.3-1】
- 代码一： 
  - (a > 0) → 0 > 0 → false，&& 短路，++a 不执行
  - a = 0，r1 = false
- 代码二： 
  - (b >= 0) → 0 >= 0 → true，|| 短路，++b 不执行
  - b = 0，r2 = true
- 代码三： 
  - (c > 0) → 0 > 0 → false，不会短路
  - 执行 ++c，c 变成 1，1 > 0 为 true
  - 整体是 false || true → true
  - c = 1，r3 = true